\newif\ifblacktitle

\definecolor{plainblack}{HTML}{231F20}
\definecolor{richblack}{HTML}{00131D}
\definecolor{neutral1}{HTML}{495961}
\definecolor{neutral2}{HTML}{758D9A}
\definecolor{neutral3}{HTML}{9FB1BD}
\definecolor{neutral4}{HTML}{E1E8EC}
\definecolor{marine1}{HTML}{005c84}
\definecolor{marine2}{HTML}{74C9E5}
\definecolor{marine3}{HTML}{3CBAC6}
\definecolor{marine4}{HTML}{B3DBD2}
\definecolor{marine5}{HTML}{4BB694}
\definecolor{marine6}{HTML}{C1D100}
\definecolor{horizon1}{HTML}{FCBC00}
\definecolor{horizon2}{HTML}{EF7D00}
\definecolor{horizon3}{HTML}{E73037}
\definecolor{horizon4}{HTML}{D5007F}
\definecolor{horizon5}{HTML}{8D3970}

\newcommand{\usesotonslide}[2]{
	\defineblockstyle{SotonSlide}{
		titlewidthscale=1, bodywidthscale=1, titleleft,
		titleoffsetx=0pt, titleoffsety=0pt, bodyoffsetx=0pt, bodyoffsety=0pt,
		bodyverticalshift=0pt, roundedcorners=0, linewidth=0pt, titleinnersep=1cm,
		bodyinnersep=1cm
	}{
		\ifBlockHasTitle%
		\draw[draw=none, left color=#1, right color=#2]
		(blocktitle.south west) rectangle (blocktitle.north east);
		\fi%
		\draw[draw=none, fill=blockbodybgcolor] %
		(blockbody.north west) [rounded corners=30] -- (blockbody.south west) --
		(blockbody.south east) [rounded corners=0]-- (blockbody.north east) -- cycle;
	}
	\useblockstyle{SotonSlide}
}

\defineblockstyle{Plain}{
	titlewidthscale=1, bodywidthscale=1, titleleft,
	titleoffsetx=0pt, titleoffsety=0pt, bodyoffsetx=0pt, bodyoffsety=0pt,
	bodyverticalshift=0pt, roundedcorners=0, linewidth=0pt, titleinnersep=1cm,
	bodyinnersep=1cm
}{
	\ifBlockHasTitle%
	\draw[draw=none, fill=blocktitlebgcolor]
	(blocktitle.south west) rectangle (blocktitle.north east);
	\fi%
	\draw[draw=none, fill=blockbodybgcolor] %
	(blockbody.north west) [rounded corners=30] -- (blockbody.south west) --
	(blockbody.south east) [rounded corners=0]-- (blockbody.north east) -- cycle;
}

\definetitlestyle{FilledSwap}{
	width=\paperwidth, roundedcorners=0, linewidth=0pt, innersep=1.5cm,
	titletotopverticalspace=0mm, titletoblockverticalspace=20mm,
	titlegraphictotitledistance=10pt
}{
	\draw[draw=none, fill=titlefgcolor]%
	(\titleposleft,\titleposbottom) rectangle (\titleposright,\titlepostop); %
}

\definecolorstyle{SotonBrandStyle}{}{
	% Background Colors
	\colorlet{backgroundcolor}{white}
	\colorlet{framecolor}{plainblack}
	% Title Colors
	\colorlet{titlefgcolor}{white}
	\colorlet{titlebgcolor}{marine1}
	% Block Colors
	\colorlet{blocktitlebgcolor}{marine1}
	\colorlet{blocktitlefgcolor}{white}
	\colorlet{blockbodybgcolor}{white}
	\colorlet{blockbodyfgcolor}{plainblack}
	% Innerblock Colors
	\colorlet{innerblocktitlebgcolor}{white}
	\colorlet{innerblocktitlefgcolor}{plainblack}
	\colorlet{innerblockbodybgcolor}{neutral4}
	\colorlet{innerblockbodyfgcolor}{plainblack}
	% Note colors
	\colorlet{notefgcolor}{plainblack}
	\colorlet{notebgcolor}{neutral4}
	\colorlet{notefrcolor}{neutral4}
}

\definelayouttheme{Soton}{
	\blacktitlefalse
	\titlegraphic{\includegraphics[width=\linewidth]{uoswhite}}
	\usecolorstyle[]{SotonBrandStyle}
	\usebackgroundstyle{Default}
	\usetitlestyle{Filled}
	\usesotonslide{marine1}{marine2}
	\useinnerblockstyle{Table}
	\usenotestyle{Default}
}

\definelayouttheme{SotonPlain}{
	\blacktitletrue
	\titlegraphic{\includegraphics[width=\linewidth]{uosblue}}
	\usecolorstyle[]{SotonBrandStyle}
	\usebackgroundstyle{Default}
	\usetitlestyle{FilledSwap}
	\useblockstyle{Plain}
	\useinnerblockstyle{Table}
	\usenotestyle{Default}
}

\ifthenelse{\paperwidth < \paperheight}{
	\newcommand{\sotonlogowidth}{0.34\paperwidth}
}{
	\newcommand{\sotonlogowidth}{0.34\paperheight}
}

\makeatletter
\renewcommand\TP@maketitle{%
	\begin{minipage}{\linewidth - \sotonlogowidth}
		\raggedright
		\ifblacktitle \color{plainblack} \else \color{titlefgcolor} \fi
		{\bfseries \Huge \sc \@title \par}
		\vspace*{1em}
		{\huge \@author \par}
		\vspace*{1em}
		{\LARGE \@institute}
	\end{minipage}%
	\hfill
	\begin{minipage}{\sotonlogowidth}
		\centering
		\@titlegraphic
	\end{minipage}
}
\makeatother