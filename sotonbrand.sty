\newif\ifswaptitlecolours

\defineblockstyle{sotonSlide}{
	titlewidthscale=1, bodywidthscale=1, titleleft,
	titleoffsetx=0pt, titleoffsety=0pt, bodyoffsetx=0pt, bodyoffsety=0pt,
	bodyverticalshift=0pt, roundedcorners=0, linewidth=0pt, titleinnersep=1cm,
	bodyinnersep=1cm
}{
	\ifBlockHasTitle%
		\draw[draw=none, left color=blocktitlebgcolor, right color=blocktitlefadecolor]
		(blocktitle.south west) rectangle (blocktitle.north east);
	\fi%
	\draw[draw=none, fill=blockbodybgcolor] %
	(blockbody.north west) [rounded corners=30] -- (blockbody.south west) --
	(blockbody.south east) [rounded corners=0]-- (blockbody.north east) -- cycle;
}

\definetitlestyle{FilledSwap}{
	width=\paperwidth, roundedcorners=0, linewidth=0pt, innersep=1.5cm,
	titletotopverticalspace=0mm, titletoblockverticalspace=20mm,
	titlegraphictotitledistance=10pt
}{
	\draw[draw=none, fill=titlefgcolor]%
	(\titleposleft,\titleposbottom) rectangle (\titleposright,\titlepostop); %
}

\definecolorstyle{sotonBrandStyle} {
	\definecolor{sotonNeutral4}{HTML}{E1E8EC}
	\definecolor{sotonMarine1}{HTML}{005c84}
	\definecolor{sotonMarine2}{HTML}{74C9E5}
	\definecolor{sotonMarine5}{HTML}{4BB694}
	\definecolor{sotonMarine6}{HTML}{C1D100}
	\definecolor{sotonHorizon1}{HTML}{FCBC00}
	\definecolor{sotonHorizon2}{HTML}{EF7D00}
}{
	% Background Colors
	\colorlet{backgroundcolor}{white}
	\colorlet{framecolor}{black}
	% Title Colors
	\colorlet{titlefgcolor}{white}
	\colorlet{titlebgcolor}{sotonMarine1}
	% Block Colors
	\colorlet{blocktitlebgcolor}{sotonMarine1}
	\colorlet{blocktitlefadecolor}{sotonMarine2}
	\colorlet{blocktitlefgcolor}{white}
	\colorlet{blockbodybgcolor}{white}
	\colorlet{blockbodyfgcolor}{black}
	% Innerblock Colors
	\colorlet{innerblocktitlebgcolor}{white}
	\colorlet{innerblocktitlefgcolor}{black}
	\colorlet{innerblockbodybgcolor}{sotonNeutral4}
	\colorlet{innerblockbodyfgcolor}{black}
	% Note colors
	\colorlet{notefgcolor}{black}
	\colorlet{notebgcolor}{sotonNeutral4}
	\colorlet{notefrcolor}{sotonNeutral4}
}

\definelayouttheme{Soton}{
	\swaptitlecoloursfalse
	\titlegraphic{\includegraphics[width=\linewidth]{uoswhite}}
	\usecolorstyle[]{sotonBrandStyle}
	\usebackgroundstyle{Default}
	\usetitlestyle{Filled}
	\useblockstyle{sotonSlide}
	\useinnerblockstyle{Table}
	\usenotestyle{Default}
}

\definelayouttheme{SotonPlain}{
	\swaptitlecolourstrue
	\titlegraphic{\includegraphics[width=\linewidth]{uosblue}}
	\usecolorstyle[]{sotonBrandStyle}
	\usebackgroundstyle{Default}
	\usetitlestyle{FilledSwap}
	\useblockstyle{sotonSlide}
	\useinnerblockstyle{Table}
	\usenotestyle{Default}
}

\ifthenelse{\paperwidth < \paperheight}{
	\newcommand{\sotonlogowidth}{0.34\paperwidth}
}{
	\newcommand{\sotonlogowidth}{0.34\paperheight}
}

\makeatletter
\renewcommand\TP@maketitle{%
	\begin{minipage}{\linewidth - \sotonlogowidth}
		\raggedright
		\ifswaptitlecolours \color{titlebgcolor} \else \color{titlefgcolor} \fi
		{\bfseries \Huge \sc \@title \par}
		\vspace*{1em}
		{\huge \@author \par}
		\vspace*{1em}
		{\LARGE \@institute}
	\end{minipage}%
	\hfill
	\begin{minipage}{\sotonlogowidth}
		\centering
		\@titlegraphic
	\end{minipage}
}
\makeatother